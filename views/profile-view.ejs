<%- include ("templates/header.ejs") %>
<div class="d-flex align-items-center min-vh-100">
  <div class="container">
    <div class="row my-3 justify-content-center">
      <div class="col-12 text-center">
        <h1 class="profile__main-data__name"><%= userDataFromDB.firstName %> <%= userDataFromDB.lastName %></h1>
        <p class="profile__main-data__email"><%= userDataFromDB.emailAddress %></p>
      </div>
      <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5 col-xxl-5 p-sm-2 p-md-5">
        <div class="row mt-4 profile__section-title">
          <div class="col">
            <p class="profile__section-title--font">User details</p>
          </div>
        </div>
        <div class="row">
          <div class="d-grid gap-3 p-3 profile__user-details">
            <div class="row">
              <div class="col-3">
                <p>About me:</p>
              </div>
              <div class="col-9">
                <p><%= userDataFromDB.userDetailsData.aboutMe %></p>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <p>Address:</p>
              </div>
              <div class="col-9">
                <p><%= userDataFromDB.userDetailsData.address %></p>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <p>City:</p>
              </div>
              <div class="col-9">
                <p><%= userDataFromDB.userDetailsData.city %></p>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <p>Postcode:</p>
              </div>
              <div class="col-9">
                <p><%= userDataFromDB.userDetailsData.postCode %></p>
              </div>
            </div>
            <div class="row">
              <div class="col-3">
                <p>Country:</p>
              </div>
              <div class="col-9">
                <p><%= userDataFromDB.userDetailsData.country %></p>
              </div>
            </div>
          </div>
        </div>
        <div class="row mt-4 profile__section-title">
          <div class="col">
            <p class="profile__section-title--font">Account details</p>
          </div>
        </div>
        <div class="row">
          <div class="p-3">
            <div class="col">
              <p>Account created: <%= userDataFromDB.accountDetailsData.createdAt %></p>
            </div>
            <div class="col">
              <p>Last activity at: <%= userDataFromDB.accountDetailsData.lastActivityAt %></p>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="d-flex justify-content-center">
              <a href="/logout"><button type="submit" id="btn-logout" class="btn">LOGOUT</button></a>
            </div>
          </div>
          <div class="col">
            <div class="d-flex justify-content-center">
              <a href="/delete"><button type="submit" id="btn-delete" class="btn">DELETE</button></a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-5 col-xxl-5 p-sm-2 p-md-5">
        <div class="row mt-4 profile__section-title">
          <div class="col">
            <p class="profile__section-title--font">Update profile</p>
          </div>
        </div>
        <div class="row">
          <div class="col p-3">
            <form action="/update" method="POST">
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="firstName" id="first-name-field" class="form-control form-control-lg shadow-none" placeholder="Enter first name">
                    <label for="first-name-field" class="form-label">First name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="lastName" id="last-name-field" class="form-control form-control-lg shadow-none" placeholder="Enter last name">
                    <label for="last-name-field" class="form-label">Last name</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3">
                    <textarea type="text" name="aboutMe" id="about-me-field" class="form-control form-control-lg shadow-none" placeholder="Enter information"></textarea>
                    <label for="about-me-field" class="form-label">About me</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="address" id="address-field" class="form-control form-control-lg shadow-none" placeholder="Enter address">
                    <label for="address-field" class="form-label">Address</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="city" id="city-field" class="form-control form-control-lg shadow-none" placeholder="Enter city">
                    <label for="city-field" class="form-label">City</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="postCode" id="postcode-field" class="form-control form-control-lg shadow-none" placeholder="Enter postcode">
                    <label for="postcode-field" class="form-label">Postcode</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3">
                    <input type="text" name="country" id="country-field" class="form-control form-control-lg shadow-none" placeholder="Enter country">
                    <label for="country-field" class="form-label">Country</label>
                  </div>
                </div>
              </div>
              <% if(err || suc) { %>
                <div class="mt-1 mb-2 text-center flash-message">
                  <% if(err) { %>
                    <p class="p-3 flash-message__error"> <%= err %></p>
                  <% } %>
                  <% if(suc) { %>
                    <p class="p-3 flash-message__success"> <%= suc %></p>
                  <% } %>
                </div>
              <% } %>
              <div class="d-flex justify-content-center mt-4">
                <button type="submit" disabled="true" id="btn-update" class="btn">UPDATE</button>
              </div>
            </form>
          </div>
        </div>
      </div> 
    <div class="row justify-content-center">
      <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 col-xxl-10 mt-4">
        <%- include ("templates/about-project.ejs") %>
      </div>
    </div>
  </div>
</div>
<script src="/javascripts/update-button-state.js"></script>
<%- include ("templates/footer.ejs") %>